<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dashboard analisis Program IUP di PTN Indonesia - informasi lengkap tentang jurusan, daya tampung, dan biaya kuliah">
    <title>Dashboard Program IUP PTN Indonesia</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Dashboard Program IUP</h1>
            <p>Analisis Lengkap Program International Undergraduate di PTN Indonesia</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>{{ stats.jumlah_ptn }}</h3>
                <p>Total PTN</p>
            </div>
            <div class="stat-card">
                <h3>{{ stats.jumlah_provinsi }}</h3>
                <p>Provinsi</p>
            </div>
            <div class="stat-card">
                <h3>{{ stats.jumlah_kota }}</h3>
                <p>Kota</p>
            </div>
            <div class="stat-card">
                <h3>{{ stats.total_prodi }}</h3>
                <p>Program Studi</p>
            </div>
        </div>

        <div class="section">
            <h2>Sebaran Geografis</h2>
            <div class="province-list">
                <h4>3 Provinsi dengan PTN Terbanyak:</h4>
                <ol>
                    {% for provinsi, jumlah in stats.provinsi_terbanyak.items() %}
                    <li><strong>{{ provinsi }}:</strong> {{ jumlah }} PTN</li>
                    {% endfor %}
                </ol>
            </div>
        </div>

        <div class="section">
            <h2>Analisis</h2>
            {{ charts.popular|safe }}
        </div>

        <div class="section">
            {{ charts.ukt_tinggi|safe }}
        </div>

        <div class="section">
            {{ charts.kapasitas_besar|safe }}
        </div>

        <div class="section">
            {{ charts.provinsi|safe }}
        </div>

        <div class="section">
            <h2>Detail PTN</h2>
            <div class="instruction-text">
                Klik kartu PTN untuk melihat detail program studi
            </div>
            <div class="ptn-grid">
                {% for ptn, jml in jurusan_per_ptn.items() %}
                <div class="ptn-card" data-ptn="{{ ptn }}" onclick="selectPTN('{{ ptn }}')">
                    <h4>{{ ptn }}</h4>
                    <p>{{ jml }} program studi</p>
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="section interactive-section" id="interactive-section">
            <h2>Detail PTN Terpilih</h2>
            <div id="selected-ptn-display" class="selected-ptn-display">
                Pilih PTN dari kartu di atas
            </div>

            <div class="ptn-stats-summary" id="ptn-stats-summary">
                <div class="stat-item">
                    <h6>Rata-Rata Daya Tampung</h6>
                    <p id="avg-daya-tampung">-</p>
                </div>
                <div class="stat-item">
                    <h6>Rata-Rata UKT</h6>
                    <p id="avg-ukt">-</p>
                </div>
            </div>
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Memuat data...</p>
            </div>
            
            <div class="charts-container" id="charts-container">
                <div class="chart-box">
                    <h3>Distribusi Daya Tampung per Program</h3>
                    <div id="pie-chart" style="height: 400px;"></div>
                </div>
                
                <div class="chart-box">
                    <h3>Distribusi UKT per Program</h3>
                    <div id="bar-chart" style="height: 400px;"></div>
                </div>
                
                <div class="chart-box">
                    <h3>Detail Program Studi</h3>
                    <table id="detail-table">
                        <thead>
                            <tr>
                                <th>Program Studi</th>
                                <th>Daya Tampung</th>
                                <th>UKT</th>
                            </tr>
                        </thead>
                        <tbody id="table-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <footer>
            <p>&copy; Dashboard IUP PTN</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>